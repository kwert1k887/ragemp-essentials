var s=class{static on(e,t){if(typeof e=="string"&&t){console.log(`[Event.on] \u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D\u043E \u0441\u043E\u0431\u044B\u0442\u0438\u0435: ${e}`),mp.events.add(e,(r,...n)=>{typeof r=="object"&&"name"in r?t(r,...n):t(...n)});return}if(typeof e=="object"&&!Array.isArray(e)){let r=Object.keys(e);if(r.length<=1)throw new Error("\u0415\u0441\u043B\u0438 \u043F\u0435\u0440\u0435\u0434\u0430\u043D \u043E\u0431\u044A\u0435\u043A\u0442, \u043E\u043D \u0434\u043E\u043B\u0436\u0435\u043D \u0441\u043E\u0434\u0435\u0440\u0436\u0430\u0442\u044C \u0431\u043E\u043B\u0435\u0435 \u043E\u0434\u043D\u043E\u0433\u043E \u0441\u043E\u0431\u044B\u0442\u0438\u044F.");r.forEach(n=>{console.log(`[Event.on] \u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u043D\u043E \u0441\u043E\u0431\u044B\u0442\u0438\u0435: ${n}`),mp.events.add(n,(a,...l)=>{let i=e[n];typeof a=="object"&&"name"in a?i(a,...l):i(...l)})});return}throw new Error("\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u0434\u0430\u043D\u043D\u044B\u0445. \u041B\u0438\u0431\u043E \u043F\u0435\u0440\u0435\u0434\u0430\u0439\u0442\u0435 \u0441\u0442\u0440\u043E\u043A\u0443 \u0441 \u043E\u0431\u0440\u0430\u0431\u043E\u0442\u0447\u0438\u043A\u043E\u043C, \u043B\u0438\u0431\u043E \u043E\u0431\u044A\u0435\u043A\u0442 \u0441 \u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u0438\u043C\u0438 \u0441\u043E\u0431\u044B\u0442\u0438\u044F\u043C\u0438.")}static off(e,t){mp.events.remove(e,t)}static emit(e,t=[],r={}){r.log===!0&&(typeof mp<"u"&&mp.events?mp&&mp.console?mp.console.logInfo(`[Event.emit] \u0412\u044B\u0437\u043E\u0432 \u0441\u043E\u0431\u044B\u0442\u0438\u044F "${e}" \u0441 \u0430\u0440\u0433\u0443\u043C\u0435\u043D\u0442\u0430\u043C\u0438: ${t}`):console.log(`[Event.emit] \u0412\u044B\u0437\u043E\u0432 \u0441\u043E\u0431\u044B\u0442\u0438\u044F "${e}" \u0441 \u0430\u0440\u0433\u0443\u043C\u0435\u043D\u0442\u0430\u043C\u0438: ${t}`):console.log("[Event.emit] \u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043B\u043E\u0433\u0438\u0440\u043E\u0432\u0430\u0442\u044C \u0441\u043E\u0431\u044B\u0442\u0438\u0435, \u043E\u043A\u0440\u0443\u0436\u0435\u043D\u0438\u0435 \u043D\u0435 \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u043E")),typeof mp<"u"&&mp.events?typeof mp.events.callRemote=="function"?mp.events.callRemote(e,...t):typeof mp.events.call=="function"?mp.events.call(e,...t):mp.console.logError(`[Event.emit] \u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0432\u044B\u0437\u0432\u0430\u0442\u044C \u0441\u043E\u0431\u044B\u0442\u0438\u0435 "${e}": mp.events.call \u0438\u043B\u0438 callRemote \u043D\u0435 \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0435\u043D\u044B`):mp.console.logError(`[Event.emit] \u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u0432\u044B\u0437\u0432\u0430\u0442\u044C \u0441\u043E\u0431\u044B\u0442\u0438\u0435 "${e}": mp \u043D\u0435 \u043E\u043F\u0440\u0435\u0434\u0435\u043B\u0451\u043D`)}};var p=class o{static create(e,t,r){try{return Array.isArray(t)?t.map(n=>o.createSingle(e,n,r)):o.createSingle(e,t,r)}catch(n){return console.error("[Blip.create] \u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0438 \u043C\u0435\u0442\u043A\u0438:",n),null}}static createSingle(e,t,r={}){let n=mp.blips.new(e,new mp.Vector3(t.x,t.y,t.z),{name:r.name??"",scale:r.scale??1,color:r.color??0,alpha:r.alpha??255,drawDistance:r.drawDistance??100,shortRange:r.shortRange??!1,rotation:r.rotation??0,dimension:r.dimension??0});return r.animation&&o.applyAnimation(n,r.animation),n}static applyAnimation(e,t){t.type==="blink"&&o.blinkAnimation(e,t.blinkDuration)}static blinkAnimation(e,t){let r=Date.now();setInterval(()=>{let n=Date.now()-r,a=n%t/t,l=255*(.5+.5*Math.sin(a*Math.PI*2)),i=Math.floor(Math.max(50,Math.min(l,255)));typeof mp<"u"&&typeof mp.game<"u"&&e.handle?mp.game.ui.setBlipAlpha(e.handle,i):e.alpha=i,n>=t&&(r=Date.now())},16)}};var c=class o{static create(e,t,r,n){try{return Array.isArray(t)?t.map(a=>o.createSingle(e,a,r,n)):o.createSingle(e,t,r,n)}catch(a){return console.error("[Marker.create] \u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0438 \u043C\u0430\u0440\u043A\u0435\u0440\u0430:",a),null}}static createSingle(e,t,r,n={}){return mp.markers.new(e,t,r,{direction:n.direction??new mp.Vector3(0,0,0),rotation:n.rotation??new mp.Vector3(0,0,0),color:n.color??[255,255,255,255],visible:n.visible??!0,dimension:n.dimension??0})}};var m=class o{static create(e,t,r){try{return Array.isArray(e)?e.map(n=>o.createSingle(n,t,r)):o.createSingle(e,t,r)}catch(n){console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u0440\u0438 \u0441\u043E\u0437\u0434\u0430\u043D\u0438\u0438 \u043A\u043E\u043B\u0448\u0435\u0439\u043F\u0430:",n)}}static createSingle(e,t,r){let n=mp.colshapes.newSphere(e.x,e.y,e.z,t),a=n;if(a.players=new Set,mp.events.add("playerEnterColshape",(l,i)=>{i===n&&(a.players.add(l),r?.onEnter?.(l,n))}),mp.events.add("playerExitColshape",(l,i)=>{i===n&&(a.players.delete(l),r?.onExit?.(l,n))}),r?.marker){if(Array.isArray(r.marker))throw new Error("\u041C\u0430\u0440\u043A\u0435\u0440 \u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0431\u044B\u0442\u044C \u043C\u0430\u0441\u0441\u0438\u0432\u043E\u043C. \u041F\u043E\u0436\u0430\u043B\u0443\u0439\u0441\u0442\u0430, \u043F\u0435\u0440\u0435\u0434\u0430\u0439\u0442\u0435 \u043E\u0431\u044A\u0435\u043A\u0442 \u0438\u043B\u0438 \u0431\u0443\u043B\u0435\u0432\u043E \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435.");if(r.marker===!0)c.create(1,e,1,{color:[255,255,255,255],visible:!0});else if(typeof r.marker=="object")c.create(r.marker.type??1,e,1,{color:r.marker.color??[255,255,255,255],visible:!0});else throw new Error("\u041D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442 \u043C\u0430\u0440\u043A\u0435\u0440\u0430. \u041E\u0436\u0438\u0434\u0430\u043B\u043E\u0441\u044C \u0431\u0443\u043B\u0435\u0432\u043E \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 \u0438\u043B\u0438 \u043E\u0431\u044A\u0435\u043A\u0442.")}return n}};var k={events:{on:s.on,off:s.off,emit:s.emit},colshape:{create:m.create},blip:{create:p.create},marker:{create:c.create}};export{k as essentials};
